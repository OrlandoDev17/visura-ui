---
interface SideBarProps {
  links?: {
    icon: any;
    label: string;
    href: string;
  }[];
  className?: string;
}

const { links, className }: SideBarProps = Astro.props;
---

<style>
  .sidebar .text {
    transition: opacity 0.2s ease-in-out;
    opacity: 1;
    white-space: nowrap;
  }

  .sidebar.collapsed .text {
    opacity: 0;
    pointer-events: none;
    width: 0;
    overflow: hidden;
  }

  .sidebar {
    transition: width 0.3s ease-in-out;
    width: 28rem; /* expandido */
  }

  .sidebar.collapsed {
    width: 8rem; /* solo Ã­conos */
  }

  .sidebar.collapsed .text {
    opacity: 0;
    pointer-events: none;
  }

  .sidebar.collapsed a {
    justify-content: center;
  }

  .sidebar.collapsed a {
    gap: 0;
  }

  .sidebar.collapsed .ctn {
    justify-content: center;
    gap: 10px;
  }
</style>

<aside
  id="sidebarPanel"
  class={`sidebar flex flex-col gap-8 bg-dark-blue border-r-2 border-gray-800 h-screen ${className} p-8`}
>
  <header class="ctn flex justify-between items-center px-2">
    <img class="w-8" src="/isologo-visura.svg" alt="Logo de Visura UI" />
    <label
      for="sidebar"
      class="toggle p-2 rounded-xl hover:bg-gray-800/50 transition cursor-pointer"
    >
      <input type="checkbox" id="sidebar" hidden />
      <svg
        class="size-8"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="lucide lucide-panel-left-close-icon lucide-panel-left-close"
        ><rect width="18" height="18" x="3" y="3" rx="2"></rect><path
          d="M9 3v18"></path><path d="m16 15-3-3 3-3"></path></svg
      >
    </label>
  </header>
  <ul class="flex flex-col gap-4">
    {
      links?.map(({ icon: Icon, label, href }) => (
        <li class="flex flex-col gap-6">
          <a
            class="flex items-center gap-6 text-xl font-medium p-2 rounded-xl hover:bg-gray-800/50 transition"
            href={href}
          >
            <Icon class="size-10" />
            <span class="text">{label}</span>
          </a>
          <hr class="border-2 border-light-blue" />
        </li>
      ))
    }
  </ul>
</aside>

<script is:inline>
  const checkbox = document.getElementById("sidebar");
  const sidebar = document.getElementById("sidebarPanel");

  checkbox.addEventListener("change", () => {
    sidebar.classList.toggle("collapsed", !checkbox.checked);
  });
</script>
